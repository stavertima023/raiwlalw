# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ API —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤

## üö® –ü—Ä–æ–±–ª–µ–º–∞
–û—à–∏–±–∫–∞ 500 –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–æ–≤ –ø—Ä–æ–¥–∞–≤—Ü–∞–º–∏:
```
Failed to load resource: the server responded with a status of 500
Order creation failed: Object
```

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. **–î–æ–±–∞–≤–ª–µ–Ω –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**
```typescript
// src/app/api/orders/route.ts
const newOrderData = {
  ...json,
  seller: user.username,
  orderDate: new Date().toISOString(),
  status: '–î–æ–±–∞–≤–ª–µ–Ω', // ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Å—Ç–∞—Ç—É—Å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
};
```

### 2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å—Ö–µ–º–∞ –¥–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π**
```typescript
// src/lib/types.ts
export const OrderSchema = z.object({
  // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
  cost: z.coerce.number().positive().nullable().optional(), // ‚úÖ –ú–æ–∂–µ—Ç –±—ã—Ç—å null
  photos: z.array(z.string()).max(3).optional().default([]), // ‚úÖ –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é []
  comment: z.string().optional().default(''), // ‚úÖ –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é ''
});
```

### 3. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª–µ–π**
```typescript
// src/app/api/orders/route.ts
const newOrderData = {
  ...json,
  seller: user.username,
  orderDate: new Date().toISOString(),
  status: '–î–æ–±–∞–≤–ª–µ–Ω',
  cost: json.cost || null, // ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
  photos: json.photos || [], // ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤
  comment: json.comment || '', // ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º —Å—Ç—Ä–æ–∫—É
};
```

### 4. **–£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏**
```typescript
try {
  const validatedOrder = OrderSchema.omit({ id: true }).parse(newOrderData);
  console.log('Validated order successfully:', validatedOrder);
} catch (validationError) {
  console.error('Validation failed:', validationError);
  throw validationError;
}
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –¢–µ–ø–µ—Ä—å API –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:
- ‚úÖ **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:** orderNumber, shipmentNumber, productType, size, price
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è:** seller (–∏–∑ —Å–µ—Å—Å–∏–∏), orderDate (—Ç–µ–∫—É—â–∞—è), status ('–î–æ–±–∞–≤–ª–µ–Ω')
- ‚úÖ **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è:** cost (null), photos ([]), comment ('')

### –§–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç:
```json
{
  "orderNumber": "WB-12345",
  "shipmentNumber": "SP-67890", 
  "productType": "—Ñ–±",
  "size": "M",
  "price": 1500,
  "photos": ["data:image/..."],
  "comment": "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫–ª–∏–µ–Ω—Ç–∞"
}
```

### API –¥–æ–±–∞–≤–ª—è–µ—Ç:
```json
{
  "orderNumber": "WB-12345",
  "shipmentNumber": "SP-67890",
  "productType": "—Ñ–±", 
  "size": "M",
  "price": 1500,
  "photos": ["data:image/..."],
  "comment": "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫–ª–∏–µ–Ω—Ç–∞",
  "seller": "user123", // ‚úÖ –ò–∑ —Å–µ—Å—Å–∏–∏
  "orderDate": "2024-01-15T10:30:00.000Z", // ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
  "status": "–î–æ–±–∞–≤–ª–µ–Ω", // ‚úÖ –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
  "cost": null // ‚úÖ –î–ª—è –∞–¥–º–∏–Ω–∞ –ø–æ–∑–∂–µ
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –ø—Ä–æ–¥–∞–≤–µ—Ü
2. –ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑"
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
   - –ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞
   - –ù–æ–º–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è
   - –¢–∏–ø —Ç–æ–≤–∞—Ä–∞
   - –†–∞–∑–º–µ—Ä
   - –¶–µ–Ω–∞
4. –î–æ–±–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
5. –î–æ–±–∞–≤—å—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
6. –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ –°—Ç–∞—Ç—É—Å: "–î–æ–±–∞–≤–ª–µ–Ω"
- ‚úÖ –ü—Ä–æ–¥–∞–≤–µ—Ü: —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

## üîç –û—Ç–ª–∞–¥–∫–∞

–ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
1. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ
2. –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞
3. –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

–ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –ª–æ–≥–∞—Ö —Å–µ—Ä–≤–µ—Ä–∞:
1. `console.log('Received order data:', json)`
2. `console.log('Validated order successfully:', validatedOrder)`
3. `console.error('Validation failed:', validationError)` 