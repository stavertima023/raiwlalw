# Инструкции по деплою

## Настройка переменных окружения в Vercel

Для корректной работы приложения на Vercel необходимо настроить следующие переменные окружения:

### Обязательные переменные:

1. **SESSION_SECRET**
   - Секретный ключ для шифрования сессий
   - Генерируйте случайную строку длиной минимум 32 символа
   - Пример: `openssl rand -base64 32`

2. **NEXT_PUBLIC_SUPABASE_URL**
   - URL вашего Supabase проекта на Railway
   - Формат: `https://your-project.railway.app`

3. **NEXT_PUBLIC_SUPABASE_ANON_KEY**
   - Публичный ключ Supabase (anon/public key)
   - Найти в настройках Supabase проекта

4. **SUPABASE_SERVICE_ROLE_KEY**
   - Служебный ключ Supabase с полными правами
   - ⚠️ КРИТИЧЕСКИ ВАЖНО: Этот ключ должен быть добавлен в Vercel
   - Найти в настройках Supabase проекта

### Как добавить переменные в Vercel:

1. Откройте ваш проект в Vercel Dashboard
2. Перейдите в Settings → Environment Variables
3. Добавьте каждую переменную:
   - Name: имя переменной (например, `SESSION_SECRET`)
   - Value: значение переменной
   - Environment: выберите Production, Preview, Development

### Важные заметки:

- Переменные с префиксом `NEXT_PUBLIC_` будут доступны в браузере
- `SUPABASE_SERVICE_ROLE_KEY` используется только на сервере для административных операций
- После добавления переменных нужно повторно задеплоить проект

### Проверка конфигурации:

После деплоя проверьте:
- Логин работает
- Создание заказов работает для продавцов
- Управление расходами работает для администраторов

Если возникают ошибки "Сервис недоступен" (503), проверьте что все переменные окружения правильно настроены в Vercel. 